    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Appointment Form</title>

        <!-- CSS Bootstrap Link -->

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <!-- Font-awesome link -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"></script>

        <!-- FOOTER -->
        <link rel="stylesheet" href="../appointment.css">
        <!-- Modal -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <!--SMTP-->
        <script src="https://smtpjs.com/v3/smtp.js"></script>
    
    </head>

    <body>
        <!-- HEADER-->
    
        <header class="header">

            <a href="index.html">
                <img src="images/logo.png" width="50px" height="50px" class="ml-2" alt="Logo">
            </a>
                    <span style="color: #1B4303; font-size: 30px; font-weight: bold ; font-family: League Gothic; margin-left: -250px;">SUERO GENERAL HOSPITAL</span>


            <nav class="navbar" style="text-decoration: none;">
                <a href="about_us.html">About Us</a>
                <a href="services.html">Services</a>
                <a href="appointment.html">Appointment</a>
                <a href="doctors.html">Our Doctor</a>
            </nav>

            
        </header>
        <!-- Footer -->

        <div class="body-container">
            <div class="app_div">
                <!-- OUT PATIENT SERVICES -->
                <div class="ps_photo">
                    <img src="images/PatientServices.png" alt="ps_img" id="ps">
                    <h3 class="ots">OUT PATIENT SERVICES</h3>
                    <div class="ps-photo-desc">
                        <h5>
                            Our outpatient department offers specialized medical services in ENT, ophthalmology, pediatrics, cardiology, ob-gyne, and pulmonology.
                            We provide comprehensive care for various health needs. Our ENT specialists address ear, nose, and throat conditions, while our ophthalmology services focus on eye health.
                            Pediatric care ensures the well-being of children through check-ups and vaccinations. Cardiology services assess and manage heart health.
                            The ob-gyne department caters to women's health needs. Pulmonology services specialize in respiratory care.
                            Additionally, our radiology department provides imaging services, including ultrasound, X-ray, and CT scans.
                            With a dedicated team of healthcare professionals, we prioritize personalized care and a positive patient experience.
                        </h5>
                    </div>
                </div>

                <!-- APPOINTMENT FORM -->
                <div class="form-container shadow" style="background: linear-gradient(180deg, #C1D8C3 0%, rgba(193, 216, 195, 0) 100%)">
                    <form action="/" method="POST" class="app_form" onsubmit="return validateForm()">
                        <div class="container">
                            <br></br>
                            <img src="images/logo.png" alt="logo" id="logo">
                            <h3 class="sgh">SUERO GENERAL HOSPITAL</h3><br></br>
                            <div class="row">
                                <div class="col-md-6 w-75" style="margin-left: -60px">
                                    <input class="form-control fixed-size-input" type="text" name="lname" id="inp1" placeholder="Patient's Last Name" required>
                                    <input class="form-control mb-2 fixed-size-input" type="text" name="fname" id="inp2" placeholder="Patient's Full Name" required>
                                    <input class="form-control mb-2 fixed-size-input" type="text" name="phone" id="inp3" placeholder="Contact Number" required>
                                    <input class="form-control mb-2 fixed-size-input" type="text" name="email" id="inp4" placeholder="Email" required>
                                    <input class="form-control mb-2 fixed-size-input" type="text" name="address" id="inp5" placeholder="Home Address" required>
                                </div>

                                <!-- SERVICES DROPDOWN-->
                                <div id="service_dd" class="col-md-6 w-75" style="margin-left: -60px;">
                                    <label for="selected_service" class="serviceselect"><strong>Service:</strong></label>
                                    <select class="form-control" id="service_opt">
                                        <option value="0">-- Please Select --</option>
                                        <option value="OPD">Out-Patient Department Services </option>
                                        <option value="Radiology Services">Radiology Services</option>
                                    </select>
                                </div>

                                <!-- DEPARTMENTS -->
                                <!-- OPD DROPDOWN -->
                                <div id="OPD_dropdown" class="col-md-6 w-75" style="margin-left: -60px;display: none">
                                    <label for="opd_selected" class="service"><strong>Select Department: </strong></label>
                                    <select class="form-control" id="opd_selected" required>
                                        <option value="0">-- Please Select --</option>
                                        <option value="ENT Department" id="entOption">ENT Department</option>
                                        <option value="Opthalmology Department">Opthalmology Department</option>
                                        <option value="Pediatrics Department">Pediatrics Department</option>
                                        <option value="Cardiology Department">Cardiology Department</option>
                                        <option value="Gynecology and Obstetrics Department">Gynecology and Obstetrics Department</option>
                                        <option value="Pulmonology Department">Pulmonology Department</option>
                                    </select>
                                </div>

                                <!-- RADIOLOGY DROPDOWN -->
                                <div id="Radiology_dropdown" class="col-md-6 w-75" style="margin-left: -60px;display: none">
                                    <label for="radiology_selected" class="service"><strong>Select Department</strong></label>
                                    <select class="form-control " id="radiology_selected">
                                        <option value="00">-- Please Select --</option>
                                        <option value="Ultrasound">Ultrasound</option>
                                        <option value="X-ray">X-ray</option>
                                        <option value="CT Scan">CT Scan</option>
                                    </select>
                                </div>

                                <!-- SCHEDULE -->
                                <!-- ENT DROPDOWN-->
                                <div id="ENT_dropdown" class="col-md-6 w-75" style="margin-left: -60px; display: none">
                                    <label for="ENT_sched"><strong>Select Schedule:</strong></label>
                                    <select class="form-control " id="ENT_sched">
                                        <option value="00">-- Please Select --</option>
                                        <option value="MWF: 8am to 9am">MWF: 8am to 9am</option>
                                        <option value="MWF: 10am to 11am"> MWF: 10am to 11am</option>
                                        <option value="MWF: 1pm to 3pm">MWF: 1pm to 3pm</option>
                                    </select>
                                </div>

                                <!-- OPTHALMOLOGY DROPDOWN-->
                                <div id="Opth_dropdown" class="col-md-6 w-75" style="margin-left: -60px; display: none">
                                    <label for="Opth_sched"><strong>Select Schedule:</strong></label>
                                    <select class="form-control " id="Opth_sched">
                                        <option value="00">-- Please Select --</option>
                                        <option value="TTHS: 10am to 11am">TTHS: 10am to 11am</option>
                                        <option value="TTHS: 1pm to 3pm"> TTHS: 1pm to 3pm</option>
                                        <option value="TTHS: 3:30pm to 5pm">TTHS: 3:30pm to 5pm</option>
                                    </select>
                                </div>

                                <!-- PEDIATRICS DROPDOWN-->
                                <div id="Pedia_dropdown" class="col-md-6 w-75" style="margin-left: -60px; display: none">
                                    <label for="Pedia_sched"><strong>Select Schedule:</strong></label>
                                    <select class="form-control " id="Pedia_sched">
                                        <option value="00">-- Please Select --</option>
                                        <option value="MWF: 8am to 11am">MWF: 8am to 11am</option>
                                        <option value=" MWF: 12pm to 2pm"> MWF: 12pm to 2pm</option>
                                        <option value="MWF: 2:30pm to 5pm">MWF: 2:30pm to 5pm</option>
                                    </select>
                                </div>

                                <!-- CARDIOLOGY DROPDOWN-->
                                <div id="Cardio_dropdown" class="col-md-6 w-75" style="margin-left: -60px; display: none">
                                    <label for="Cardio_sched"><strong>Select Schedule:</strong></label>
                                    <select class="form-control " id="Cardio_sched">
                                        <option value="00">-- Please Select --</option>
                                        <option value="TTHS: 9am to 12nn">TTHS: 9am to 12nn</option>
                                        <option value="TTHS: 2pm to 7pm"> TTHS: 2pm to 7pm</option>
                                    </select>
                                </div>
                            </div>

                            <!-- GYNECOLOGY DROPDOWN-->
                            <div id="Gyne_dropdown" class="col-md-6 w-75" style="margin-left: -60px;display: none">
                                <label for="Gyne_sched"><strong>Select Schedule:</strong></label>
                                <select class="form-control " id="Gyne_sched">
                                    <option value="00">-- Please Select --</option>
                                    <option value="Tue Fri: 1pm to 5pm">Tue Fri: 1pm to 5pm</option>
                                    <option value="Wed Sat 1pm to 5pm"> Wed Sat 1pm to 5pm</option>
                                </select>
                            </div>

                            <!-- PULMONARY DROPDOWN-->
                            <div id="Pulmo_dropdown" class="col-md-6 w-75" style="margin-left: -60px;display: none">
                                <label for="Pulmo_sched"><strong>Select Schedule:</strong></label>
                                <select class="form-control " id="Pulmo_sched">
                                    <option value="00">-- Please Select --</option>
                                    <option value="Mon Tue: 7am to 12nn">Mon Tue: 7am to 12nn</option>
                                    <option value="Fri: 1pm to 5pm"> Fri: 1pm to 5pm</option>
                                </select>
                            </div>

                            <!-- ULTRASOUND DROPDOWN-->
                            <div id="Ultrasound_dropdown" class="col-md-6 w-75" style="margin-left: 60px; display: none">
                                <label for="Ultrasound_sched"><strong>Select Schedule:</strong></label>
                                <select class="form-control" id="Ultrasound_sched">
                                    <option value="00">-- Please Select --</option>
                                    <option value="Mon - Fri: 8am to 11am">Mon - Fri: 8am to 11am</option>
                                    <option value=" Mon - Fri: 1pm to 4pm"> Mon - Fri: 1pm to 4pm</option>
                                    <option value="Sat: 9am to 3pm"> Sat: 9am to 3pm</option>
                                </select>
                            </div>

                            <!--X-RAY  DROPDOWN-->
                            <div id="Xray_dropdown" class="col-md-6 mb-3" style="margin-left: 60px;display: none">
                            <label for="Xray_sched"><strong>Select Schedule:</strong></label>
                            <select class="form-control" id="Xray_sched">
                                <option value="00">-- Please Select --</option>
                                <option value="Mon - Fri: 8am to 11am">Mon - Fri: 8am to 11am</option>
                                <option value=" Mon - Fri: 1pm to 4pm"> Mon - Fri: 1pm to 4pm</option>
                                <option value="Mon - Fri: 6pm to 8pm"> Mon - Fri: 6pm to 8pm</option>
                            </select>
                        </div>  

                        <!--CT SCAN  DROPDOWN-->
                        <div id="CT_dropdown" class="col-md-6 mb-3" style="margin-left: 60px;display: none">
                            <label for="CT_sched"><strong>Select Schedule:</strong></label>
                            <select class="form-control" id="CT_sched">
                                <option value="00">-- Please Select --</option>
                                <option value="Mon - Fri: 8am to 11am">Mon - Fri: 8am to 11am</option>
                                <option value="Mon - Fri: 1pm to 4pm"> Mon - Fri: 1pm to 4pm</option>
                                <option value="Mon - Fri: 6pm to 8pm"> Mon - Fri: 6pm to 8pm</option>
                            </select>
                        </div>  
                    </div>
                    <div class="text-center my-10">
                        <input type="submit" id="submitFormBtn" class="form-submit" value="Submit" onclick="sendForm()">
                    </div>
                    </div>
                </form>
            </div>           
        </div>
            <!-- APPOINTMENT FORM -->
            <script>
               
                // document.getElementById("submitFormBtn").addEventListener("click", function (event) {
                //     event.preventDefault(); // Prevent the default form submission behavior
                //     window.location.href = "about_us.html";
                // });

            // Get references to the dropdowns
            const serviceDropdown = document.getElementById("service_opt");
            const opdDropdown = document.getElementById("OPD_dropdown");
            const radiologyDropdown = document.getElementById("Radiology_dropdown");
            const ENTDropdown = document.getElementById("ENT_dropdown");
            const Opthdrowndown = document.getElementById("Opth_dropdown");
            const Pediadropdown = document.getElementById("Pedia_dropdown");
            const Cardiodropdown = document.getElementById("Cardio_dropdown");
            const Gynedropdown = document.getElementById("Gyne_dropdown");
            const Pulmodropdown = document.getElementById("Pulmo_dropdown");
            const Ultrasounddropdown = document.getElementById("Ultrasound_dropdown");
            const Xraydropdown = document.getElementById("Xray_dropdown");
            const CTdropdown = document.getElementById("CT_dropdown");
            const OPDselectedDept = document.getElementById("opd_selected");
            const RadiologyselectedDept = document.getElementById("radiology_selected");            

            const lname = document.getElementById("inp1");
            const fname = document.getElementById("inp2");
            const cnum = document.getElementById("inp3");
            const email = document.getElementById("inp4");
            const address = document.getElementById("inp5");
            const service = document.getElementById("service_opt");
            const opddept = document.getElementById("opd_selected");
            const raddept = document.getElementById("radiology_selected");
            const entsched = document.getElementById("ENT_sched");
            const opthsched = document.getElementById("Opth_sched");
            const pediasched = document.getElementById("Pedia_sched");
            const cardiosched = document.getElementById("Cardio_sched");
            const gynesched = document.getElementById("Gyne_sched");
            const pulmosched = document.getElementById("Pulmo_sched");
            const ultrasched = document.getElementById("Ultrasound_sched");
            const xraysched = document.getElementById("Xray_sched");
            const ctsched = document.getElementById("CT_sched");
            const submit = document.getElementsByClassName("app_form")[0];

            submit.addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent default form submission
                fetch('http://localhost:3001/', {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        lname: lname.value,
                        fname: fname.value,
                        cnum: cnum.value,
                        email: email.value,
                        address: address.value,
                        service: service.value,
                        opddept: opddept.value,
                        raddept: raddept.value,
                        entsched: entsched.value,
                        opthsched: opthsched.value,
                        pediasched: pediasched.value,
                        cardiosched: cardiosched.value,
                        gynesched: gynesched.value,
                        pulmosched: pulmosched.value,
                        ultrasched: ultrasched.value,
                        xraysched: xraysched.value,
                        ctsched: ctsched.value,
                    }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
                    sendForm();
                });


            // Add an event listener to the first dropdown
            serviceDropdown.addEventListener("change", function() {
                // Hide all dropdowns
                opdDropdown.style.display = "none";
                radiologyDropdown.style.display = "none";

                // Get the selected value
                const selectedService = serviceDropdown.value;

                // Show or hide the second dropdown based on the selected value
                if (selectedService === "OPD"){
                    opdDropdown.style.display = "block";
                }
                else if (selectedService === "Radiology Services") {
                    radiologyDropdown.style.display = "block";
                }
            });
            OPDselectedDept.addEventListener("change", function (){
                const selectedDept = OPDselectedDept.value;

                //Hide other dropdowns
                ENTDropdown.style.display = "none";
                Opthdrowndown.style.display = "none";
                Pediadropdown.style.display = "none";
                Cardiodropdown.style.display = "none";
                Gynedropdown.style.display = "none";
                Pulmodropdown.style.display = "none";

                // Your logic to show/hide dropdowns based on selectedDept
                if (selectedDept === "ENT Department") {
                    ENTDropdown.style.display = "block";
                }
                else if (selectedDept === "Opthalmology Department") {
                    Opthdrowndown.style.display = "block";
                }
                else if (selectedDept === "Pediatrics Department"){
                    Pediadropdown.style.display = "block";
                }
                else if (selectedDept === "Cardiology Department"){
                    Cardiodropdown.style.display = "block";
                }
                else if (selectedDept === "Gynecology and Obstetrics Department"){
                    Gynedropdown.style.display= "block";
                }
                else if (selectedDept === "Pulmonology Department"){
                    Pulmodropdown.style.display = "block";
                }
            });
            RadiologyselectedDept.addEventListener("change", function(){
                const selectedDept2 = RadiologyselectedDept.value;

                //Hide other dropdowns
                Ultrasounddropdown.style.display = "none";
                Xraydropdown.style.display = "none";
                CTdropdown.style.display = "none";

                if (selectedDept2 === "Ultrasound"){
                    Ultrasounddropdown.style.display = "block";
                }
                else if (selectedDept2 === "X-ray"){
                    Xraydropdown.style.display = "block";
                }
                else if (selectedDept2 === "CT Scan"){
                    CTdropdown.style.display = "block";
                }
            });
            function validateForm() {
                var lastName = document.getElementById("inp1").value;
                var firstname = document.getElementById("inp2").value;
                var contactNumber = document.getElementById("inp3").value;
                var userEmail = document.getElementById("inp4").value;
                var homeAddress = document.getElementById("inp5").value;
                var serviceOption = document.getElementById("service_opt").value;
                var departmentOption = document.getElementById("opd_selected").value;
                var scheduleOption =
                document.getElementById("ENT_sched").value 
                document.getElementById("Opth_sched").value 
                document.getElementById("Pedia_sched").value 
                document.getElementById("Cardio_sched").value 
                document.getElementById("Gyne_sched").value 
                document.getElementById("Pulmo_sched").value 
                document.getElementById("Ultrasound_sched").value 
                document.getElementById("Xray_sched").value 
                document.getElementById("CT_sched").value;

                //Check if all fields are filled out
                if (
                !lastName ||
                !firstname ||
                !contactNumber || 
                !userEmail ||
                !homeAddress ||
                serviceOption === "" || 
                departmentOption === "" ||
                scheduleOption === "0" 
                ) {
                swal(
                    "Warning!",
                    "Please fill out all the fields in the form",
                    "warning"
                );
                return false; // Prevent form submission
                }
                return true;
            }
            function sendForm() {
                const fnameValue = fname.value;
                const lnameValue = lname.value;
                const phoneValue = cnum.value;
                const emailValue = email.value;
                const addressValue = address.value;
                const departmentOption =
                OPDselectedDept.value || RadiologyselectedDept.value;
                const schedValue = entsched.value || opthsched.value || pediasched.value || cardiosched.value ||
                                    gynesched.value || pulmosched.value || ultrasched.value ||
                                    xraysched.value || ctsched.value;

                const departmentName =
                    OPDselectedDept.value === "ENT Department" ? "ENT Department" : 
                    OPDselectedDept.value === "Opthalmology Department" ? "Opthalmology Department" : 
                    OPDselectedDept.value === "Pediatrics Department" ? "Pediatrics Department"
                    : OPDselectedDept.value === "Cardiology Department"
                    ? "Cardiology Department"
                    : OPDselectedDept.value === "Gynecology and Obstetrics Department"
                    ? "Gynecology and Obstetrics Department"
                    : OPDselectedDept.value === "Pulmonology Department"
                    ? "Pulmonology Department"
                    : RadiologyselectedDept.value === "Ultrasound"
                    ? "Ultrasound Department"
                    : RadiologyselectedDept.value === "X-ray"
                    ? "X-ray Department"
                    : RadiologyselectedDept.value === "CT Scan"
                    ? "CT Scan Department"
                    : "";

                const e_body = `<h1><center>Suero General Hospital</center></h1>
                            <h3><center>Your booking appointment has been confirmed.</center></h3>
                            <p>Hi there, ${fnameValue}, <br><br>
                                We hope this email finds you well. This is a confirmation of your upcoming appointment at 
                                <strong>Suero General Hospital.</strong> We appreciate your trust in our healthcare services!
                            <p/>
                            <h3>APPOINTMENT DETAILS</h3>
                            <ul>
                                <li><strong>Patient's Name: </strong>${fnameValue} ${lnameValue}</li>
                                <li><strong>Patient's Contact Number:</strong> ${phoneValue}</li>
                                <li><strong>Patient's Address:</strong> ${addressValue}</li>
                                <li><strong>Service: </strong> ${departmentName}</li>
                                <li><strong>Schedule:</strong> ${schedValue}</li>
                            </ul>
                            <h3>REMINDERS:</h3>
                            <ol>
                                <li>Arrival: Please arrive at least 15 minutes before your scheduled appointment to complete any necessary paperwork.</li>
                                <li>Documentation: Bring your photo ID, insurance card, and any relevant medical records or test results.</li>
                                <li>Cancellation/Rescheduling: If you need to cancel or reschedule your appointment, 
                                    kindly contact us at least 24 hours in advance.</li>
                            </ol>
                            <p>We look forward to providing you with quality healthcare. Thank you for choosing Suero General Hospital.</p><br>
                            <p>Best Regards</p>
                            <p>Suero General Hospital</p>`;

                if (validateForm()) {
                Email.send({
                    SecureToken: "ebb0daa0-f116-4a3f-b7d1-8d9f8497bf6c",
                    To: emailValue,
                    From: "suerogeneralhospital0@gmail.com",
                    Subject: "Booking Appointment Confirmed",
                    Body: e_body,
                }).then((message) => {
                    if (message == "OK") {
                    swal(
                        "Success!",
                        "Your booking appointment has been submitted.",
                        "success"
                    );
                    }
                });
                }
            }
            </script>
        </div>
    </body>
    </html>
